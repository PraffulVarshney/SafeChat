<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <meta charset="UTF-8" />
    <title>Spring Boot WebSocket Chat Application</title>
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <noscript>
      <h2>Sorry! Your browser doesn't support Javascript</h2>
    </noscript>
    <div class="snowflakes-container"></div>
    <!-- <div id="username-page">
    <div class="username-page-container">
        <h1 class="title">Type your username to enter the Chatroom</h1>
        <form id="usernameForm" name="usernameForm">
            <div class="form-group">
                <input type="text" id="name" placeholder="Username" autocomplete="off" class="form-control" maxlength="20"  pattern="^(?=.*[A-Za-z0-9_\-\.])[A-Za-z0-9 _\-\.]*$" 
                title="Must include at least one letter, number, -, _, or ., and no only spaces."
                required/>
            </div>
            <div class="form-group">
                <button type="submit" class="accent username-submit">Start Chatting</button>
            </div>
        </form>
        <form id="createRoomForm" name="createRoonForn">
            <div class="form-group">
                <button type="submit" class="accent create-room">Create Chat Room</button>
            </div>
        </form>
        <form id="joinRoomForm" name="joinRoonForn">
            <div class="form-group">
                <button type="submit" class="accent join-room">Join Chat Room</button>
            </div>
        </form>
    </div>
</div> -->

    <!-- <div id="username-page">
    <div class="username-page-container">
        <h1 class="title">Type your username to enter the Chatroom</h1>

        <div class="form-group">
            <input type="text" id="name" placeholder="Username" autocomplete="off" class="form-control" maxlength="20" pattern="^(?=.*[A-Za-z0-9_\-\.])[A-Za-z0-9 _\-\.]*$" 
            title="Must include at least one letter, number, -, _, or ., and no only spaces."
            required />
        </div>

        <form id="usernameForm" name="usernameForm">
            <div class="form-group">
                <button type="submit" class="accent username-submit">Start Chatting</button>
            </div>
        </form>

        <form id="createRoomForm" name="createRoomForm">
            <div class="form-group">
                <button type="submit" class="accent create-room">Create Chat Room</button>
            </div>
        </form>

        <form id="joinRoomForm" name="joinRoomForm">
            <div class="form-group">
                <button type="submit" class="accent join-room">Join Chat Room</button>
            </div>
        </form>
    </div>
</div> -->

    <div id="username-page">
      <div class="username-page-container">
        <h1 class="title">Type your username to enter the Chatroom</h1>

        <form id="usernameForm" name="usernameForm">
          <div class="form-group">
            <input
              type="text"
              id="name"
              placeholder="Username"
              autocomplete="off"
              class="form-control"
              maxlength="20"
              pattern="^(?=.*[A-Za-z0-9_\-\.])[A-Za-z0-9 _\-\.]*$"
              title="Must include at least one letter, number, -, _, or ., and no only spaces."
              required
            />
          </div>
          <div class="form-group">
            <button type="submit" class="accent username-submit">
              Start Chatting
            </button>
          </div>
        </form>

        <form id="createRoomForm" name="createRoomForm">
          <div class="form-group">
            <input
              type="hidden"
              id="createRoomUsername"
              name="username"
              value=""
            />
            <button type="submit" class="accent create-room">
              Create Chat Room
            </button>
          </div>
        </form>

        <form id="joinRoomForm" name="joinRoomForm">
          <div class="form-group">
            <input
              type="hidden"
              id="joinRoomUsername"
              name="username"
              value=""
            />
            <button type="submit" class="accent join-room">
              Join Chat Room
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- <script>
    document.getElementById('usernameForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form submission

        const usernameInput = document.getElementById('name').value.trim();

        if (usernameInput === "") {
            alert('Please enter a valid username.');
            return;
        }

        // Set the username value in the other forms
        document.getElementById('createRoomUsername').value = usernameInput;
        document.getElementById('joinRoomUsername').value = usernameInput;

        alert(`Username "${usernameInput}" has been set for all forms.`);
    });

    // Prevent accidental submission of other forms without a username
    document.getElementById('createRoomForm').addEventListener('submit', function(event) {
        if (!document.getElementById('createRoomUsername').value) {
            alert('Please enter a username first.');
            event.preventDefault();
        }
    });

    document.getElementById('joinRoomForm').addEventListener('submit', function(event) {
        if (!document.getElementById('joinRoomUsername').value) {
            alert('Please enter a username first.');
            event.preventDefault();
        }
    });
</script> -->

    <div id="chat-page" class="hidden">
      <div class="chat-container">
        <div class="chat-header">
          <h2>Chat Room</h2>
        </div>
        <div id="exitForm">
          <button type="submit" id="exit" class="secondary">Exit</button>
        </div>
        <div class="connecting">Connecting...</div>
        <ul id="messageArea"></ul>
        <form id="messageForm" name="messageForm">
          <div class="form-group">
            <div class="input-group clearfix">
              <input
                type="text"
                id="message"
                placeholder="Type a message..."
                autocomplete="off"
                class="form-control"
                maxlength="10000"
              />
              <button type="submit" class="primary">Send</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <script type="module" src="/js/main.js"></script>
    <style id="snow-style">
      #snow {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        z-index: 9;
        pointer-events: none;
        opacity: 0.5;
      }
      .snow {
        display: block;
        position: absolute;
        width: 0.6rem;
        height: 0.6rem;
        background: white;
        border-radius: 99px;
      }
    </style>
    <section id="snow"></section>
    <script>
      !(function () {
        try {
          for (
            var t = document.getElementById("snow"),
              n = document.getElementById("snow-style"),
              e = 0;
            e < 128;
            e++
          ) {
            var a = 100 * w(),
              s = 20 * w() - 10,
              r = a + s,
              o = a + s / 2,
              l = 0.3 + w() / 2,
              i = 100 * l,
              c = w(),
              m = 10 + 20 * w(),
              d = -30 * w(),
              f = document.createElement("i");
            f.classList.add("snow"),
              (f.style.cssText = [
                "opacity:",
                w(),
                ";transform:translate(",
                a,
                "vw,-10px) scale(",
                c,
                ");animation:snow",
                e,
                " ",
                m,
                "s ",
                d,
                "s linear infinite",
              ].join("")),
              t.appendChild(f),
              (n.innerHTML += [
                "@keyframes  snow",
                e,
                "{",
                100 * l,
                "%{transform:translate(",
                r,
                "vw,",
                i,
                "vh) scale(",
                c,
                ")}100%{transform:translate(",
                o,
                "vw,100vh) scale(",
                c,
                ")}}",
              ].join(""));
          }
        } catch (t) {}
        function w() {
          return Math.random();
        }
      })();
    </script>
  </body>
</html>
